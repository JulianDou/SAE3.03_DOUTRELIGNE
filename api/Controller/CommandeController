<?php

require_once("Controller.php");
require_once("Repository/CommandeRepository.php");

class CommandeController extends Controller {

    private CommandeRepository $commandes;

    public function __construct() {
        $this->commandes = new CommandeRepository();
    }

    protected function processGetRequest(HttpRequest $request) {
        $type = $request->getRessources();
        $type = explode('/', $type)[1] ?? null;
        if ($type == "Pending" || $type == "Delivered" || $type == "Shipped") {
            $commande = $this->commandes->findStatus($type);
            if ($commande) {
                return $commande;
            }
            http_response_code(404);
            return ['error' => 'Commande introuvable'];
        }
        http_response_code(404);
        return ['error' => 'Param√®tre inconnu'];
    }

    protected function processPostRequest(HttpRequest $request) {
        return false;
    }

    protected function processDeleteRequest(HttpRequest $request) {
        return false;
    }

    protected function processPatchRequest(HttpRequest $request) {
        return false;
    }
}